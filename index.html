<!DOCTYPE html>
<html>
<head>
      border: none;
      border-radius: 6px;
    }

    #submitBtn:hover {
      color: #555;
    }

    #comments p {
      background: #f5f5f5;
      padding: 10px 14px;
      border-radius: 6px;
      margin-top: 10px;
      font-size: 15px;
      position: relative;
    }

    .deleteBtn {
      position: absolute;
      right: 10px;
      top: 10px;
      background: none;
      border: none;
      color: red;
      cursor: pointer;
      font-size: 12px;
    }

    .pagination {
      text-align: center;
      margin-top: 20px;
    }

    .pagination button {
      margin: 0 5px;
      padding: 5px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
    const firebaseConfig = {
      apiKey: "AIzaSyCP-qPyliPqs_eUdm1zJd0SvcR417rX--0",
      authDomain: "teacherboard-6469f.firebaseapp.com",
      databaseURL: "https://teacherboard-6469f-default-rtdb.firebaseio.com",
      projectId: "teacherboard-6469f",
      storageBucket: "teacherboard-6469f.appspot.com",
      messagingSenderId: "140117849735",
      appId: "1:140117849735:web:b7a62b3afe23558f0aa22",
      measurementId: "G-SXYPY2XFH9"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const commentsPerPage = 10;
    let allComments = [];
    let currentPage = 1;

    function submitComment() {
      const input = document.getElementById('commentInput');
      if (input.value.trim() === "") return;
      const newCommentRef = db.ref('comments').push();
      newCommentRef.set({
        text: input.value.trim(),
        timestamp: Date.now()
      });
      input.value = '';
    }

    function deleteComment(key) {
      db.ref('comments/' + key).remove();
    }

    function renderComments(page) {
      const commentsDiv = document.getElementById('comments');
      commentsDiv.innerHTML = '';
      const start = (page - 1) * commentsPerPage;
      const end = start + commentsPerPage;
      const commentsToShow = allComments.slice(start, end);

      commentsToShow.forEach(({ key, text }) => {
        const p = document.createElement('p');
        p.innerText = text;

        const deleteBtn = document.createElement('button');
        deleteBtn.innerText = '삭제';
        deleteBtn.className = 'deleteBtn';
        deleteBtn.onclick = () => deleteComment(key);
        p.appendChild(deleteBtn);

        commentsDiv.appendChild(p);
      });

      renderPagination();
    }

    function renderPagination() {
      const paginationDiv = document.getElementById('pagination');
      paginationDiv.innerHTML = '';
      const totalPages = Math.ceil(allComments.length / commentsPerPage);

      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.innerText = i;
        btn.onclick = () => {
          currentPage = i;
          renderComments(currentPage);
        };
        paginationDiv.appendChild(btn);
      }
    }

    db.ref('comments').on('value', (snapshot) => {
      const data = snapshot.val();
      allComments = [];
      for (const key in data) {
        allComments.push({ key, text: data[key].text });
      }
      allComments.reverse();
      renderComments(currentPage);
    });
  </script>
</body>
</html>
